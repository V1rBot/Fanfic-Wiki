# All-Word Project Documentation

## 1. Обзор проекта

**All-Word** — это веб-приложение (Single Page Application), представляющее собой вики-систему для просмотра информации о различных вымышленных вселенных (мирах), таких как SCP, Marvel, Harry Potter и др.

Приложение обладает динамическим интерфейсом, который загружает все данные с бэкенд-сервера. Ключевой особенностью является мощный встроенный **Режим Редактора**, который позволяет управлять всем контентом прямо в приложении, от создания новых "миров" до редактирования отдельных статей.

## 2. Структура проекта

```
/
├── data/                  # Директория с данными всех вселенных
│   ├── scp/
│   │   ├── world.json     # Конфигурация мира SCP
│   │   └── ...json        # Файлы с данными для категорий
│   └── ...                # Другие вселенные
├── images/                # Изображения для оформления и контента
├── server/                # Бэкенд (Node.js)
│   ├── server.js          # Основной файл сервера
│   ├── package.json       # Зависимости сервера
│   └── backups/           # Автоматические бэкапы данных
├── index.html             # Основной HTML-файл
├── script.js              # Основной JavaScript-файл фронтенда
├── style.css              # Стили приложения и темы
├── manifest.json          # "Манифест" - список всех миров
├── sw.js                  # Service Worker для PWA
└── DOCUMENTATION.md       # Эта документация
```

## 3. Технологический стек

*   **Фронтенд:**
    *   HTML5
    *   CSS3
    *   Vanilla JavaScript (ES6+)
    *   Progressive Web App (PWA)
*   **Бэкенд:**
    *   Node.js
    *   Express.js
*   **Формат данных:** JSON

## 4. Функциональность

### 4.1. Основной интерфейс (Режим "Вики")

*   **Выбор вселенной:** При запуске или по клику на логотип появляется модальное окно для выбора "мира".
*   **Навигация по категориям:** В левой панели отображается иерархическое меню категорий для выбранного мира.
*   **Просмотр элементов:** В правой панели отображается список элементов (статей) для выбранной категории.
*   **Просмотр статьи:** По клику на элемент открывается его детальное представление с полным описанием, изображениями и дополнительной информацией.
*   **Темы:** Каждая вселенная может иметь свою уникальную визуальную тему, которая меняет оформление сайта.
*   **Адаптивность:** Интерфейс адаптирован для мобильных устройств.

### 4.2. Режим Игры

На данный момент является заглушкой и находится в разработке.

### 4.3. Бэкенд (Сервер)

*   **Назначение:** Сервер на Express.js выполняет две основные функции:
    1.  Отдаёт файлы фронтенда (HTML, CSS, JS, изображения).
    2.  Предоставляет API для чтения и записи JSON-файлов с данными.
*   **API Endpoints:**
    *   `GET /api/data/*`: Читает и возвращает любой JSON-файл.
    *   `GET /api/manifest`: Возвращает содержимое `manifest.json`.
    *   `POST /api/save`: Сохраняет изменения в любой файл (с предварительным созданием бэкапа).
    *   `POST /api/scaffold-world`: Создаёт структуру файлов для нового мира.
    *   `POST /api/rename-world`: Переименовывает/перемещает файлы мира.
    *   `POST /api/delete-world`: Архивирует и удаляет папку мира.
    *   `POST /api/create-category-assets`: Создаёт файлы для новой категории.
*   **Безопасность:** Перед любым изменением или удалением данных сервер автоматически создает резервную копию в папке `server/backups`.

### 4.4. Режим Редактора

Это скрытая и наиболее мощная часть приложения.

*   **Активация:**
    1.  Находясь на главной странице, наберите на клавиатуре слово `edit`.
    2.  В появившемся модальном окне введите пароль: `3103`.
*   **Возможности:**
    *   **Управление мирами (`manifest.json`):**
        *   Добавление и удаление миров.
        *   Изменение порядка миров (drag-and-drop).
        *   Редактирование ID, имени и путей к файлам мира.
        *   Автоматическое создание файловой структуры для новых миров на сервере.
    *   **Управление категориями (`world.json`):**
        *   Создание, редактирование и удаление категорий и подкатегорий (до 3 уровней вложенности).
        *   Редактирование названий, описаний и путей к файлам с данными.
        *   Изменение порядка и вложенности категорий (drag-and-drop).
        *   Привязка темы оформления к миру.
    *   **Управление элементами (файлы категорий):**
        *   Просмотр, создание, редактирование и удаление статей (элементов) в выбранной категории.
        *   Редактирование происходит в модальном окне с полями "Имя", "Краткое описание" и "Полные данные" (поддерживает HTML).
    *   **Управление темами (`style.css`):**
        *   Встроенный текстовый редактор для прямого редактирования файла стилей.

## 5. Запуск проекта

1.  **Установка зависимостей:**
    *   Установите Node.js (если не установлен).
    *   Перейдите в папку `server` и выполните `npm install` для установки зависимостей бэкенда.
2.  **Запуск сервера:**
    *   Находясь в папке `server`, выполните команду: `node server.js` (или `nodemon server.js` для автоматического перезапуска при изменениях).
3.  **Доступ к приложению:**
    *   Откройте браузер и перейдите по адресу: [http://localhost:3103](http://localhost:3103).
